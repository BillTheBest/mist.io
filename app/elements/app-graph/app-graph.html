<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../responsive-element/responsive-element.html">
<link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html">
<dom-module id="app-graph">
    <template>
        <style>
        :host {
            padding: 0 0 20px 0;
            position: relative;
            float: none;
            width: calc(50% - 2px);
            display: inline-block;
            vertical-align: top;
        }
        
        :host paper-card {
            width: 100%;
        }
        
        .card-content {
            width: 100%;
            display: block;
            padding: 0;
        }
        
        .graph {
            min-width: 100%;
        }
        
        google-chart {
            width: 100%;
            max-width: 100%;
        }
        
        paper-icon-button {
            float: right;
        }
        
        @media (max-width: 600px) {
            :host {
                width: 100%;
            }
        }
        </style>
        <iron-media-query query="(max-width: 600px)" query-matches="{{queryMatches}}"></iron-media-query>
        <paper-card heading="{{title}}">
            <!-- graph title goes here, comes in with title as a parameter in app-graph element-->
            <div class="card-content">
                <div class="graph">
                    <responsive-element>
                        <content></content>
                    </responsive-element>
                </div>
            </div>
            <div class="card-actions">
                <paper-icon-button icon="close" paper-card-toggle>close</paper-icon-button>
                <paper-icon-button icon="hardware:keyboard-arrow-down" paper-card-toggle>miniimise</paper-icon-button>
            </div>
        </paper-card>
    </template>
</dom-module>
<script>
Polymer({
    is: 'app-graph',
    properties: {
        title: {
            String, value: "A GRAPH"
        }
    },
    //need to resize graphs on window resize
    listeners: {
        "resize": "redraw"
    },
    resizeEvent: function() {
        this.queryChanged(function() {
            this.fire("resize");
        })
    },
    redraw: function() {
        console.log("resize");
        // Polymer.dom("content").getDistributedNodes("google-chart")[0].drawChart();

    }
});
</script>
