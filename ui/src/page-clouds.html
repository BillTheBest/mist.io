<link rel="import" href="../bower_components/app-route/app-route.html">

<link rel="import" href="page-items.html">
<link rel="import" href="clouds/cloud-add.html">

<dom-module id="page-clouds">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <app-route route="{{route}}"
                pattern="/:key"
                data="{{data}}"></app-route>

    <page-items name="clouds" class="clouds" model="[[model]]" items="[[model.cloudsArray]]" sections="[[sections]]" section="[[sections.clouds]]" onboarding="[[onboarding]]" hidden$=[[!_isListActive(route.path)]]></page-items>
    <cloud-add providers="[[providers]]" keys="[[model.keysArray]]" section="[[sections.clouds]]" clouds="[[model.cloudsArray]]" hidden$=[[!_isAddPageActive(route.path)]]></cloud-add>
    <cloud-page model="[[model]]" params="[[_getCloud(data.clouds, model.clouds)]]" sections="[[sections]]" section="[[sections.clouds]]" hidden$=[[!_isDetailsPageActive(route.path)]]></cloud-page>

  </template>

  <script>
    Polymer({

      is: 'page-clouds',

      properties: {
        model: Object,
        sections: Array,
        onboarding: Object,
        data: Object,
        providers: {
            type: Object,
            value: PROVIDERS
        }
      },

      attached: function() {

      },

      _isAddPageActive: function(path) {
          return path == '/+add';
      },

      _isListActive: function(path) {
          return !path;
      },

      _isListActive: function(path) {
          return !path;
      },
      _getCloud: function(id) {
          if (this.model.clouds)
              return this.model.clouds[id];
      }


    });
  </script>
</dom-module>
